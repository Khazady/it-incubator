(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{140:function(e,t,n){e.exports=n(189)},145:function(e,t,n){},166:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),o=n.n(i),c=n(10),l=n.n(c),u=(n(145),n(14)),s=n(52),d=n(8),m=n(79),f=n(116),b=n.n(f).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":"a13d3464-2e9e-4272-8cbf-d0d1a9048e02"}}),E=function(){return b.get("todo-lists").then((function(e){return e.data}))},O=function(e){return b.post("todo-lists",{title:e}).then((function(e){return e.data}))},p=function(e){return b.delete("todo-lists/".concat(e)).then((function(e){return e.data}))},g=function(e,t){return b.put("todo-lists/".concat(e),{title:t}).then((function(e){return e.data}))},h=function(e){return b.get("todo-lists/".concat(e,"/tasks")).then((function(e){return e.data}))},j=function(e,t){return b.post("todo-lists/".concat(e,"/tasks"),{title:t}).then((function(e){return e.data}))},T=function(e,t){return b.delete("todo-lists/".concat(e,"/tasks/").concat(t)).then((function(e){return e.data}))},I=function(e,t,n){return b.put("todo-lists/".concat(e,"/tasks/").concat(t),n).then((function(e){return e.data}))},v=function(e){return b.post("auth/login",e).then((function(e){return e.data}))},S=function(){return b.get("auth/me").then((function(e){return e.data}))},k=function(){return b.delete("auth/login").then((function(e){return e.data}))};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(a||(a={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(r||(r={}));var y=function(e,t){e.messages.length?t(P(e.messages[0])):t(P("Some error occurred")),t(w("failed"))},C=function(e,t){t(P(e.message?e.message:"Some error occurred")),t(w("failed"))},A={isLoggedIn:!1},D=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},L={status:"idle",error:null,isInitialized:!1},w=function(e){return{type:"APP/SET-STATUS",status:e}},P=function(e){return{type:"APP/SET-ERROR",error:e}},N=function(e){return{type:"APP/SET-IS-INITIALIZED",isInitialized:e}},R=[],G=n(40),K={},M=function(e,t,n){return function(a,r){a(w("loading"));var i=r().tasks[e].find((function(e){return e.id===t}));if(i){var o=Object(d.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,status:i.status,title:i.title},n);I(e,t,o).then((function(r){0===r.resultCode?(a(function(e,t,n){return{type:"UPDATE-TASK",taskId:t,todolistId:e,model:n}}(e,t,n)),a(w("succeeded"))):y(r,a)})).catch((function(e){return C(e,a)}))}else console.warn("task was not found in the state")}},U=n(117),x=Object(s.c)({todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"ADD-TODOLIST":return[Object(d.a)(Object(d.a)({},t.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(m.a)(e));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{title:t.title}):e}));case"CHANGE-TODOLIST-FILTER":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{filter:t.filter}):e}));case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{entityStatus:t.entityStatus}):e}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t.todolistId,e[t.todolistId].filter((function(e){return e.id!==t.taskId}))));case"ADD-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t.task.todoListId,[t.task].concat(Object(m.a)(e[t.task.todoListId]))));case"UPDATE-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t.todolistId,e[t.todolistId].map((function(e){return e.id===t.taskId?Object(d.a)(Object(d.a)({},e),t.model):e}))));case"ADD-TODOLIST":return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t.todolist.id,[]));case"REMOVE-TODOLIST":var n=Object(d.a)({},e);return delete n[t.id],n;case"SET-TODOLISTS":var a=Object(d.a)({},e);return t.todolists.forEach((function(e){a[e.id]=[]})),a;case"SET-TASKS":return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t.todolistId,t.tasks));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(d.a)(Object(d.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.error});case"APP/SET-IS-INITIALIZED":return Object(d.a)(Object(d.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),F=Object(s.d)(x,Object(s.a)(U.a));window.store=F;n(166);var H=n(228),V=n(229),z=n(220),Z=n(126),q=n(195),Y=n(194),B=n(230),J=n(225),_=n(193),$=n(54),Q=n(231),W=n(221),X=o.a.memo((function(e){console.log("AddItemForm rendered");var t=Object(i.useState)(""),n=Object($.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(null),l=Object($.a)(c,2),u=l[0],s=l[1],d=function(){""!==a.trim()?(e.addItem(a),r("")):s("Title is not required")};return o.a.createElement("div",null,o.a.createElement(Q.a,{value:a,onChange:function(e){r(e.currentTarget.value),s(null)},onKeyPress:function(e){null!==u&&s(null),13===e.charCode&&d()},variant:"outlined",error:!!u,label:"Title",helperText:u,disabled:e.disabled}),o.a.createElement(z.a,{color:"primary",onClick:d,disabled:e.disabled},o.a.createElement(W.a,null)))})),ee=n(127),te=n(223),ne=n(222),ae=n(224),re=n(233),ie=o.a.memo((function(e){console.log("EditableSpan is called");var t=Object(i.useState)(!1),n=Object($.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(""),l=Object($.a)(c,2),u=l[0],s=l[1],d=function(){r(!1),e.onChange(u)};return a?o.a.createElement(Q.a,{value:u,autoFocus:!0,onBlur:function(){return d()},onChange:function(e){return s(e.currentTarget.value)},onKeyPress:function(e){return 13===e.charCode&&d()}}):o.a.createElement("span",{onDoubleClick:function(){e.disabled?r(!1):(r(!0),s(e.title))}},e.title)})),oe=o.a.memo((function(e){var t=Object(u.b)(),n=Object(i.useCallback)((function(){var n,a;t((n=e.todolistId,a=e.task.id,function(e){e(w("loading")),T(n,a).then((function(t){if(0===t.resultCode){var r=function(e,t){return{type:"REMOVE-TASK",todolistId:e,taskId:t}}(n,a);e(r),e(w("succeeded"))}else y(t,e)})).catch((function(t){return C(t,e)}))}))}),[t,e.task.id,e.todolistId]),r=Object(i.useCallback)((function(n){var r=n.currentTarget.checked;t(M(e.todolistId,e.task.id,{status:r?a.Completed:a.New}))}),[t,e.task.id,e.todolistId]),c=Object(i.useCallback)((function(n){return t(M(e.todolistId,e.task.id,{title:n}))}),[t,e.task.id,e.todolistId]);return o.a.createElement("li",{key:e.task.id,className:"completed"!==e.filter&&e.task.status===a.Completed?"is-done":""},o.a.createElement(re.a,{checked:e.task.status===a.Completed,onChange:r,color:"primary",disabled:e.disabled}),o.a.createElement(ie,{title:e.task.title,onChange:c,disabled:e.disabled}),o.a.createElement(z.a,{onClick:n,disabled:e.disabled},o.a.createElement(ne.a,null)))})),ce=o.a.memo((function(e){var t=e.demo,n=void 0!==t&&t,r=Object(ee.a)(e,["demo"]);console.log("Todolist is called");var c,l=Object(u.b)(),s=Object(u.c)((function(e){return e.tasks[r.todolist.id]}));switch(r.todolist.filter){case"active":c=s.filter((function(e){return e.status===a.New}));break;case"completed":c=s.filter((function(e){return e.status===a.Completed}));break;default:c=s}var d=Object(i.useCallback)((function(e){return l(function(e,t){return function(n){n(w("loading")),j(e,t).then((function(e){0===e.resultCode?(n({type:"ADD-TASK",task:e.data.item}),n(w("succeeded"))):y(e,n)})).catch((function(e){return C(e,n)}))}}(r.todolist.id,e))}),[l,r.todolist.id]),m=Object(i.useCallback)((function(){return l((e=r.todolist.id,function(t){t({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:e,entityStatus:"loading"}),t(w("loading")),p(e).then((function(n){0===n.resultCode?(t(function(e){return{type:"REMOVE-TODOLIST",id:e}}(e)),t(w("succeeded"))):y(n,t)})).catch((function(e){return C(e,t)}))}));var e}),[l,r.todolist.id]),f=Object(i.useCallback)((function(e){var t,n,a=(t=r.todolist.id,n=e,function(e){e(w("loading")),g(t,n).then((function(a){0===a.resultCode?(e(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(t,n)),e(w("succeeded"))):(a.messages.length?e(P(a.messages[0])):e(P("Some error occurred")),e(w("failed")))})).catch((function(t){return C(t,e)}))});l(a)}),[l,r.todolist.id]),b=Object(i.useCallback)((function(e,t){return l(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",id:e,filter:t}}(r.todolist.id,t))}),[l,r.todolist.id]);return Object(i.useEffect)((function(){var e;n||l((e=r.todolist.id,function(t){t(w("loading")),h(e).then((function(n){t(function(e,t){return{type:"SET-TASKS",tasks:e,todolistId:t}}(n.items,e)),t(w("succeeded"))}))}))}),[l,r.todolist.id]),o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement(ie,{title:r.todolist.title,onChange:f,disabled:"loading"===r.todolist.entityStatus}),o.a.createElement(z.a,{onClick:m,disabled:"loading"===r.todolist.entityStatus},o.a.createElement(ne.a,null))),o.a.createElement(X,{addItem:d,disabled:"loading"===r.todolist.entityStatus}),o.a.createElement("ul",null,c.map((function(e){return o.a.createElement(oe,{task:e,filter:r.todolist.filter,todolistId:r.todolist.id,key:e.id,disabled:"loading"===r.todolist.entityStatus})}))),o.a.createElement("div",null,o.a.createElement(te.a,null,o.a.createElement(Y.a,{onClick:function(){return b(r.todolist.id,"all")},variant:"all"===r.todolist.filter?"contained":"outlined",color:"primary",endIcon:o.a.createElement(ae.a,null)},"All"),o.a.createElement(Y.a,{onClick:function(){return b(r.todolist.id,"active")},variant:"active"===r.todolist.filter?"contained":"outlined",color:"inherit"},"Active"),o.a.createElement(Y.a,{onClick:function(){return b(r.todolist.id,"completed")},variant:"completed"===r.todolist.filter?"contained":"outlined",color:"secondary"},"Completed"))))})),le=n(15),ue=o.a.memo((function(e){var t=e.demo,n=void 0!==t&&t,a=Object(u.b)(),r=Object(u.c)((function(e){return e.todolists})),c=Object(u.c)((function(e){return e.auth.isLoggedIn})),l=Object(i.useCallback)((function(e){return a(function(e){return function(t){t(w("loading")),O(e).then((function(e){0===e.resultCode?(t({type:"ADD-TODOLIST",todolist:e.data.item}),t(w("succeeded"))):y(e,t)})).catch((function(e){return C(e,t)}))}}(e))}),[a]);return Object(i.useEffect)((function(){!n&&c&&a((function(e){e(w("loading")),E().then((function(t){e({type:"SET-TODOLISTS",todolists:t}),e(w("succeeded"))})).catch((function(t){return C(t,e)}))}))}),[a]),c?o.a.createElement(o.a.Fragment,null,o.a.createElement(J.a,{container:!0,style:{padding:"20px"}},o.a.createElement(X,{addItem:l})),o.a.createElement(J.a,{container:!0,spacing:3},r.map((function(e){return o.a.createElement(J.a,{item:!0,key:e.id},o.a.createElement(_.a,{style:{padding:"10px"}},o.a.createElement(ce,{todolist:e,demo:n})))})))):o.a.createElement(le.a,{to:"/to-do-list/login"})})),se=n(124),de=n.n(se),me=n(235),fe=n(232);function be(e){return o.a.createElement(fe.a,Object.assign({elevation:6,variant:"filled"},e))}function Ee(){var e=Object(u.c)((function(e){return e.app.error})),t=Object(u.b)(),n=function(e,n){"clickaway"!==n&&t(P(null))},a=null!==e;return o.a.createElement(me.a,{open:a,autoHideDuration:3e3,onClose:n},o.a.createElement(be,{onClose:n,severity:"error"},e))}var Oe=n(236),pe=n(219),ge=n(226),he=n(227),je=n(125),Te=function(){var e=Object(u.b)(),t=Object(je.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password?e.password.length<4&&(t.password="Password must be at least 4 characters"):t.password="Password is required",t},onSubmit:function(t){var n;e((n=t,function(e){e(w("loading")),v(n).then((function(t){0===t.resultCode?(e(D(!0)),e(w("succeeded"))):y(t,e)})).catch((function(t){return C(t,e)}))}))}});return Object(u.c)((function(e){return e.auth.isLoggedIn}))?o.a.createElement(le.a,{to:"/"}):o.a.createElement(J.a,{container:!0,justify:"center"},o.a.createElement(J.a,{item:!0,xs:4},o.a.createElement("form",{onSubmit:t.handleSubmit},o.a.createElement(Oe.a,null,o.a.createElement(pe.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement(ge.a,null,o.a.createElement(Q.a,Object.assign({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.errors.email?o.a.createElement("div",{style:{color:"red"}},t.errors.email):null,o.a.createElement(Q.a,Object.assign({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.errors.password?o.a.createElement("div",{style:{color:"red"}},t.errors.password):null,o.a.createElement(he.a,{label:"Remember me",control:o.a.createElement(re.a,Object.assign({},t.getFieldProps("rememberMe"),{checked:t.values.rememberMe}))}),o.a.createElement(Y.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Ie=n(123),ve=n.n(Ie);var Se=function(e){var t=e.demo,n=void 0!==t&&t,a=Object(u.b)(),r=Object(u.c)((function(e){return e.app.status})),c=Object(u.c)((function(e){return e.app.isInitialized})),l=Object(u.c)((function(e){return e.auth.isLoggedIn}));Object(i.useEffect)((function(){a((function(e){S().then((function(t){0===t.resultCode?e(D(!0)):y(t,e),e(N(!0))})).catch((function(t){C(t,e),e(N(!0))}))}))}),[]);var s=Object(i.useCallback)((function(){return a((function(e){e(w("loading")),k().then((function(t){0===t.resultCode?(e(D(!1)),e(w("succeeded"))):y(t,e)})).catch((function(t){C(t,e)}))}))}),[]);return c?o.a.createElement("div",{className:"App"},o.a.createElement(H.a,{position:"static"},o.a.createElement(V.a,null,o.a.createElement(z.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(Z.a,{open:!1})),o.a.createElement(q.a,{variant:"h6"},"News"),l&&o.a.createElement(Y.a,{color:"inherit",onClick:s},"Log out"))),"loading"===r&&o.a.createElement("div",{className:"progress-bar"},o.a.createElement(de.a,{color:"secondary"})),o.a.createElement(B.a,{fixed:!0},o.a.createElement(le.d,null,o.a.createElement(le.b,{exact:!0,path:"/",render:function(){return o.a.createElement(ue,{demo:n})}}),o.a.createElement(le.b,{path:"/login",render:function(){return o.a.createElement(Te,null)}}),o.a.createElement(le.b,{path:"/404",render:function(){return o.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),o.a.createElement(le.a,{from:"*",to:"/404"}))),o.a.createElement(Ee,null)):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(ve.a,null))},ke=n(57);l.a.render(o.a.createElement(u.a,{store:F},o.a.createElement(ke.a,{basename:"/to-do-list"},o.a.createElement(Se,null))),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.b24d3e6b.chunk.js.map